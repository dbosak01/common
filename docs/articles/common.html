<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>common • common</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="common">
<meta property="og:description" content="common">
<meta property="og:image" content="https://common.r-sassy.org/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">common</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/common.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="common_files/header-attrs-2.14/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>common</h1>
            
      
      
      <div class="hidden name"><code>common.Rmd</code></div>

    </div>

    
    
<p>The <strong>common</strong> package is a lightweight package that
contains solutions for commonly encountered problems when working in
Base R.</p>
<p>Here is a list of the functions and a short explanation of each:</p>
<ul>
<li>
<a href="#v"><strong>v()</strong></a>: A generalized NSE quoting
function.</li>
<li>
<a href="#sort"><strong>sort.data.frame()</strong></a>: An overload
to the sort function for data frames.</li>
<li>
<a href="#labels"><strong>labels.data.frame()</strong></a>: An
overload to the labels function for data frames.</li>
<li>
<a href="#p"><strong>%p%</strong></a>: An infix operator for the
<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> function.</li>
<li>
<a href="#eq"><strong>%eq%</strong></a>: An enhanced equality
operator.</li>
<li>
<a href="#path"><strong>Sys.path()</strong></a>: A function to
return the path of the currently running program.</li>
<li>
<a href="#roundup"><strong>roundup()</strong></a>: A rounding
function that matches SAS® rounding.</li>
<li>
<a href="#find"><strong>file.find()</strong></a>: A function to
search for a file on the file system.</li>
<li>
<a href="#find"><strong>dir.find()</strong></a>: A function to
search for a directory on the file system.</li>
<li>
<a href="#names"><strong>find.names()</strong></a>: A function to
search for variable names on a data.frame.</li>
<li>
<a href="#attr"><strong>copy.attributes()</strong></a>: A function
to copy column attributes from one data frame to another.</li>
<li>
<a href="#supsc"><strong>supsc()</strong></a>: A function to get
UTF-8 superscript characters.</li>
<li>
<a href="#supsc"><strong>subsc()</strong></a>: A function to get
UTF-8 subscript characters.</li>
</ul>
<div id="v" class="section level3">
<h3 class="hasAnchor">
<a href="#v" class="anchor"></a>A generalized NSE quoting function</h3>
<p>Normally, when working in Base R, it is necessary to quote variable
names when passing them into a function or operator. For example,
observe the R subset brackets:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable names passed to subset are quoted</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> mtcars[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> , <span class="fu">c</span>(<span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span>)]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View results</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>dat</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>                   mpg cyl  disp</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>Mazda RX4         <span class="fl">21.0</span>   <span class="dv">6</span> <span class="fl">160.0</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>Mazda RX4 Wag     <span class="fl">21.0</span>   <span class="dv">6</span> <span class="fl">160.0</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>Datsun <span class="dv">710</span>        <span class="fl">22.8</span>   <span class="dv">4</span> <span class="fl">108.0</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Hornet <span class="dv">4</span> Drive    <span class="fl">21.4</span>   <span class="dv">6</span> <span class="fl">258.0</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>Hornet Sportabout <span class="fl">18.7</span>   <span class="dv">8</span> <span class="fl">360.0</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>Valiant           <span class="fl">18.1</span>   <span class="dv">6</span> <span class="fl">225.0</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>Duster <span class="dv">360</span>        <span class="fl">14.3</span>   <span class="dv">8</span> <span class="fl">360.0</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>Merc 240D         <span class="fl">24.4</span>   <span class="dv">4</span> <span class="fl">146.7</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>Merc <span class="dv">230</span>          <span class="fl">22.8</span>   <span class="dv">4</span> <span class="fl">140.8</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>Merc <span class="dv">280</span>          <span class="fl">19.2</span>   <span class="dv">6</span> <span class="fl">167.6</span></span></code></pre></div>
<p>Some Base R functions and almost all <strong>tidyverse</strong>
functions use Non-standard Evaluation (NSE) when passing variable names.
This style of evaluation allows the user to type variables without using
quotation marks or other methods of resolution.</p>
<p>Picking up from the previous example, let’s now subset the
<code>dat</code> data frame created above using the
<code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> function, which uses NSE:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No quotes on "cyl" using subset() function</span></span>
<span><span class="va">dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">cyl</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">dt</span></span>
<span><span class="co">#             mpg cyl  disp</span></span>
<span><span class="co"># Datsun 710 22.8   4 108.0</span></span>
<span><span class="co"># Merc 240D  24.4   4 146.7</span></span>
<span><span class="co"># Merc 230   22.8   4 140.8</span></span></code></pre></div>
<p>The <code><a href="../reference/v.html">v()</a></code> function in the <strong>common</strong> package
is a quoting function. It allows you to use Non-Standard Evaluation
(NSE) even on functions that were not specifically written for NSE.
Observe:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a vector of unquoted names</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/v.html">v</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">cyl</span>, <span class="va">disp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Result is a quoted vector</span></span>
<span><span class="va">v1</span></span>
<span><span class="co"># [1] "mpg"  "cyl"  "disp"</span></span>
<span></span>
<span><span class="co"># Variable names not quoted</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fu"><a href="../reference/v.html">v</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">cyl</span>, <span class="va">disp</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Works as expected</span></span>
<span><span class="va">dat2</span></span>
<span><span class="co">#                    mpg cyl  disp</span></span>
<span><span class="co"># Mazda RX4         21.0   6 160.0</span></span>
<span><span class="co"># Mazda RX4 Wag     21.0   6 160.0</span></span>
<span><span class="co"># Datsun 710        22.8   4 108.0</span></span>
<span><span class="co"># Hornet 4 Drive    21.4   6 258.0</span></span>
<span><span class="co"># Hornet Sportabout 18.7   8 360.0</span></span>
<span><span class="co"># Valiant           18.1   6 225.0</span></span>
<span><span class="co"># Duster 360        14.3   8 360.0</span></span>
<span><span class="co"># Merc 240D         24.4   4 146.7</span></span>
<span><span class="co"># Merc 230          22.8   4 140.8</span></span>
<span><span class="co"># Merc 280          19.2   6 167.6</span></span></code></pre></div>
<p><a href="#top">top</a></p>
</div>
<div id="sort" class="section level3">
<h3 class="hasAnchor">
<a href="#sort" class="anchor"></a>Sort a data frame</h3>
<p>Base R provides sort and order functions that work adequately on
vectors. For data frames, the options are more limited. In particular,
if you want to sort a data frame by multiple columns, there are no
functions in Base R to do it. The R documentation makes the following
suggestion:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Get sort order</span></span>
<span><span class="va">ord</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="st">'order'</span>, <span class="va">dat</span><span class="op">[</span> ,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cyl"</span>, <span class="st">"mpg"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sort data</span></span>
<span><span class="va">dat</span><span class="op">[</span><span class="va">ord</span>, <span class="op">]</span></span>
<span><span class="co">#                    mpg cyl  disp</span></span>
<span><span class="co"># Datsun 710        22.8   4 108.0</span></span>
<span><span class="co"># Merc 230          22.8   4 140.8</span></span>
<span><span class="co"># Merc 240D         24.4   4 146.7</span></span>
<span><span class="co"># Valiant           18.1   6 225.0</span></span>
<span><span class="co"># Merc 280          19.2   6 167.6</span></span>
<span><span class="co"># Mazda RX4         21.0   6 160.0</span></span>
<span><span class="co"># Mazda RX4 Wag     21.0   6 160.0</span></span>
<span><span class="co"># Hornet 4 Drive    21.4   6 258.0</span></span>
<span><span class="co"># Duster 360        14.3   8 360.0</span></span>
<span><span class="co"># Hornet Sportabout 18.7   8 360.0</span></span></code></pre></div>
<p>In the above example, notice that a) there is no actual sorting
function for data frames, and b) the method illustrated above provides
no way to control the sort order of the variables involved. They are all
sorted ascending.</p>
<p>The <code><a href="../reference/sort.data.frame.html">sort.data.frame()</a></code> function is an overload to the
generic <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> function that is tailored for data frames.
It allows you to sort by multiple columns, and control the sort
direction for each sort variable. Here is an example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sort by cyl then mpg</span></span>
<span><span class="va">dat1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">dat</span>, by <span class="op">=</span> <span class="fu"><a href="../reference/v.html">v</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat1</span></span>
<span><span class="co">#                    mpg cyl  disp</span></span>
<span><span class="co"># Datsun 710        22.8   4 108.0</span></span>
<span><span class="co"># Merc 230          22.8   4 140.8</span></span>
<span><span class="co"># Merc 240D         24.4   4 146.7</span></span>
<span><span class="co"># Valiant           18.1   6 225.0</span></span>
<span><span class="co"># Merc 280          19.2   6 167.6</span></span>
<span><span class="co"># Mazda RX4         21.0   6 160.0</span></span>
<span><span class="co"># Mazda RX4 Wag     21.0   6 160.0</span></span>
<span><span class="co"># Hornet 4 Drive    21.4   6 258.0</span></span>
<span><span class="co"># Duster 360        14.3   8 360.0</span></span>
<span><span class="co"># Hornet Sportabout 18.7   8 360.0</span></span>
<span></span>
<span><span class="co"># Sort by cyl descending then mpg ascending</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">dat</span>, by <span class="op">=</span> <span class="fu"><a href="../reference/v.html">v</a></span><span class="op">(</span><span class="va">cyl</span>, <span class="va">mpg</span><span class="op">)</span>,</span>
<span>             ascending <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">FALSE</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">dat2</span></span>
<span><span class="co">#                    mpg cyl  disp</span></span>
<span><span class="co"># Duster 360        14.3   8 360.0</span></span>
<span><span class="co"># Hornet Sportabout 18.7   8 360.0</span></span>
<span><span class="co"># Valiant           18.1   6 225.0</span></span>
<span><span class="co"># Merc 280          19.2   6 167.6</span></span>
<span><span class="co"># Mazda RX4         21.0   6 160.0</span></span>
<span><span class="co"># Mazda RX4 Wag     21.0   6 160.0</span></span>
<span><span class="co"># Hornet 4 Drive    21.4   6 258.0</span></span>
<span><span class="co"># Datsun 710        22.8   4 108.0</span></span>
<span><span class="co"># Merc 230          22.8   4 140.8</span></span>
<span><span class="co"># Merc 240D         24.4   4 146.7</span></span></code></pre></div>
<p>The <code><a href="../reference/sort.data.frame.html">sort.data.frame()</a></code> function also allows you to
control whether NA values are sorted to the top or bottom. See the
documentation for further information and more examples.<br><a href="#top">top</a></p>
</div>
<div id="labels" class="section level3">
<h3 class="hasAnchor">
<a href="#labels" class="anchor"></a>Modify labels on a data frame</h3>
<p>While many data operations in R do not require control over the
labels on a data frame, some types of programming do. Particularly in
situations where you are sharing data between multiple people and
groups, the column labels can provide valuable information about the
data contained in a particular column.</p>
<p>Unfortunately, Base R does not supply an easy way to manipulate these
labels. The only approach is to use the <code><a href="https://rdrr.io/r/base/attr.html">attr()</a></code> function to
set the labels individually for each column. Like this:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Assign labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">mpg</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Miles Per Gallon"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">cyl</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Cylinders"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html">attr</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">disp</span>, <span class="st">"label"</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Displacement"</span></span></code></pre></div>
<p>The <code><a href="../reference/labels.data.frame.html">labels.data.frame()</a></code> function is an overload to the
Base R <code><a href="https://rdrr.io/r/base/labels.html">labels()</a></code> function that is specific to data frames.
The function allows you to set labels for an entire data frame using a
named list. Here is an example:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Assign labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="st">"Miles Per Gallon"</span>,</span>
<span>                    cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,</span>
<span>                    disp <span class="op">=</span> <span class="st">"Displacement"</span><span class="op">)</span></span>
<span>                    </span>
<span><span class="co"># View label attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># $mpg</span></span>
<span><span class="co"># [1] "Miles Per Gallon"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $cyl</span></span>
<span><span class="co"># [1] "Cylinders"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $disp</span></span>
<span><span class="co"># [1] "Displacement"</span></span></code></pre></div>
<p>This function makes it much easier to set and retrieve labels on a
data frame. The labels make it easier for users to understand the data.
This function should be included in Base R, but for some reason is
not.<br><a href="#top">top</a></p>
</div>
<div id="p" class="section level3">
<h3 class="hasAnchor">
<a href="#p" class="anchor"></a>An infix concatenation operator</h3>
<p>Most programming languages provide a built-in concatenation operator.
R does not. Instead, it provides the <code><a href="https://rdrr.io/r/base/paste.html">paste()</a></code> and
<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> functions. While these functions do perform
concatenation adequately, it is sometimes more convenient to have an
operator.</p>
<p>The <code>%p%</code> operator is an infix version of the
<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> function. It provides the same functionality of
<code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code>, but in a more compact manner. Like so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Concatenation using paste0() function</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"There are "</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>, <span class="st">" rows in the mtcars data frame"</span><span class="op">)</span></span>
<span><span class="co"># [1] "There are 32 rows in the mtcars data frame"</span></span>
<span></span>
<span><span class="co"># Concatenation using %p% operator</span></span>
<span><span class="st">"There are "</span> <span class="op"><a href="../reference/%p%.html">%p%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op"><a href="../reference/%p%.html">%p%</a></span> <span class="st">" rows in the mtcars data frame"</span></span>
<span><span class="co"># [1] "There are 32 rows in the mtcars data frame"</span></span></code></pre></div>
<p><a href="#top">top</a></p>
</div>
<div id="eq" class="section level3">
<h3 class="hasAnchor">
<a href="#eq" class="anchor"></a>An enhanced equality operator</h3>
<p>The <strong>common</strong> package contains an enhanced equality
operator. The objective of the <code>%eq%</code> operator is to return a
TRUE or FALSE value when any two objects are compared. This enhanced
equality operator is useful for situations when you don’t want to check
for NULL or NA values, or care about the data types of the objects you
are comparing.</p>
<p>The <code>%eq%</code> operator also compares data frames. The
comparison will include all data values, but no attributes. This
functionality is particularly useful when comparing tibbles, as tibbles
often have many attributes assigned by <code>dplyr</code> functions.</p>
<p>Below is an example of several comparisons using the
<code>%eq%</code> infix operator:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Comparing of NULLs and NA</span></span>
<span><span class="cn">NULL</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NULL</span>        <span class="co"># TRUE</span></span>
<span><span class="cn">NULL</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NA</span>          <span class="co"># FALSE</span></span>
<span><span class="cn">NA</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NA</span>            <span class="co"># TRUE</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NULL</span>           <span class="co"># FALSE</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NA</span>             <span class="co"># FALSE</span></span>
<span></span>
<span><span class="co"># Comparing of atomic values</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="fl">1</span>              <span class="co"># TRUE</span></span>
<span><span class="st">"one"</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="st">"one"</span>      <span class="co"># TRUE</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="st">"one"</span>          <span class="co"># FALSE</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>     <span class="co"># FALSE</span></span>
<span></span>
<span><span class="co"># Comparing of vectors</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span></span>
<span><span class="va">v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span></span>
<span><span class="va">v1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">v1</span>            <span class="co"># TRUE</span></span>
<span><span class="va">v1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">v2</span>            <span class="co"># FALSE</span></span>
<span></span>
<span><span class="co"># Comparing of data frames</span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">mtcars</span>    <span class="co"># TRUE</span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">iris</span>      <span class="co"># FALSE</span></span>
<span><span class="va">iris</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">iris</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>,<span class="op">]</span> <span class="co"># FALSE</span></span>
<span></span>
<span><span class="co"># Mixing it up </span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NULL</span>      <span class="co"># FALSE</span></span>
<span><span class="va">v1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="cn">NA</span>            <span class="co"># FALSE</span></span>
<span><span class="fl">1</span> <span class="op"><a href="../reference/%eq%.html">%eq%</a></span> <span class="va">v1</span>             <span class="co"># FALSE</span></span></code></pre></div>
<p>While it can be advantageous to have a comparison operator that does
not give errors when encountering a NULL or NA value, note that this
behavior can also mask problems with your code. Therefore, use the
<code>%eq%</code> operator with care.<br><a href="#top">top</a></p>
</div>
<div id="path" class="section level3">
<h3 class="hasAnchor">
<a href="#path" class="anchor"></a>Getting the current path</h3>
<p>Most programming languages provide a simple way to get the path of
the currently running program. This basic feature has been left out of
R. The <code><a href="../reference/Sys.path.html">Sys.path()</a></code> function aims to make up for the
oversight.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get current path</span></span>
<span><span class="va">pth</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Sys.path.html">Sys.path</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View path</span></span>
<span><span class="va">pth</span></span>
<span><span class="co"># [1] "C:/packages/common/vignettes/common.Rmd"</span></span></code></pre></div>
<p>Note that this function returns the full path of the currently
running program, including the file name and extension. This
functionality is different from <code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code>, which returns only
the current working directory.</p>
<p>Credit for this function goes to Andrew Simmons and the
<strong>this.path</strong> package. The <strong>this.path</strong>
functionality is renamed and provided here out of convenience.<br><a href="#top">top</a></p>
</div>
<div id="roundup" class="section level3">
<h3 class="hasAnchor">
<a href="#roundup" class="anchor"></a>An alternate rounding function</h3>
<p>As everyone knows, the R <code><a href="https://rdrr.io/r/base/Round.html">round()</a></code> function rounds to the
nearest even. For example:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare sample vector </span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">0.5</span>,<span class="fl">9.5</span>,by<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">v1</span></span>
<span><span class="co"># [1] 0.5 1.5 2.5 3.5 4.5 5.5 6.5 7.5 8.5 9.5</span></span>
<span></span>
<span><span class="co"># Base R round function</span></span>
<span><span class="va">r1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">v1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Rounds to nearest even</span></span>
<span><span class="va">r1</span></span>
<span><span class="co"># [1]  0  2  2  4  4  6  6  8  8 10</span></span></code></pre></div>
<p>However, humans and other software systems usually round 5 up. The
reasons for R rounding the way it does are valid. Yet this difference in
the way R rounds sometimes makes it difficult to compare R results to
results from other software systems, particularly SAS®. It would be
convenient if there were another rounding function that could be used
when trying to compare R results to SAS®.</p>
<p>That is the purpose of the <code><a href="../reference/roundup.html">roundup()</a></code> function. Observe
the differences in output to what was shown above:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Round up function</span></span>
<span><span class="va">r2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roundup.html">roundup</a></span><span class="op">(</span><span class="va">v1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Rounds 5 up</span></span>
<span><span class="va">r2</span></span>
<span><span class="co"># [1]  1  2  3  4  5  6  7  8  9 10</span></span></code></pre></div>
<p>Note that the function behaves differently when rounding negative
values.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Negate original vector</span></span>
<span><span class="va">v2</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="va">v1</span></span>
<span><span class="va">v2</span></span>
<span><span class="co"># [1] -0.5 -1.5 -2.5 -3.5 -4.5 -5.5 -6.5 -7.5 -8.5 -9.5</span></span>
<span></span>
<span><span class="co"># Rounding negative values</span></span>
<span><span class="va">r3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/roundup.html">roundup</a></span><span class="op">(</span><span class="va">v2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Rounds away from zero</span></span>
<span><span class="va">r3</span></span>
<span><span class="co"># [1]  -1  -2  -3  -4  -5  -6  -7  -8  -9 -10</span></span></code></pre></div>
<p>As you can see, when dealing with negative numbers, the
<code><a href="../reference/roundup.html">roundup()</a></code> function actually rounds down. “Round away from
zero” is the best description of this function. The rounding logic of
the <code><a href="../reference/roundup.html">roundup()</a></code> function matches SAS® software, and can be
used when comparing output between the two systems.<br><a href="#top">top</a></p>
</div>
<div id="find" class="section level3">
<h3 class="hasAnchor">
<a href="#find" class="anchor"></a>File and Directory search</h3>
<p>Sometimes you know the name of the file you are looking for, but do
not know the exact location. It might be in the directory above your
program, or it might be in the directory below. It could be one level
up, or 3 levels up.</p>
<p>The <code><a href="../reference/file.find.html">file.find()</a></code> function provides an easy way to search
for files you are looking for. You tell the function where to start
searching from and what to look for, and it will begin looking in the
base directory. Once the base directory is searched, it will expand the
search above and below the base directory. The search routine will
continue expanding the search until it hits the limits imposed by the
<code>up</code> and <code>down</code> parameters. Here is an
example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look for a file named "globals.R"</span></span>
<span><span class="va">pths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/file.find.html">file.find</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"globals.R"</span><span class="op">)</span></span>
<span><span class="va">pths</span></span>
<span></span>
<span><span class="co"># Look for Rdata files three levels up, and two levels down</span></span>
<span><span class="va">pths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/file.find.html">file.find</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"*.Rdata"</span>, up <span class="op">=</span> <span class="fl">3</span>, down <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">pths</span></span></code></pre></div>
<p>The function will return a vector of full paths that meet the search
criteria, and are within bounds of the search. If no file is found that
meets the search criteria, the function returns a NULL.</p>
<p>The <code><a href="../reference/dir.find.html">dir.find()</a></code> function works the same as
<code><a href="../reference/file.find.html">file.find()</a></code>, but for directories instead of files. Note
that these two functions may be used together to perform complex
searches.<br><a href="#top">top</a></p>
</div>
<div id="names" class="section level3">
<h3 class="hasAnchor">
<a href="#names" class="anchor"></a>Finding variable names</h3>
<p>Sometimes you have a data frame with many variables, and you need to
perform an operation on only some of them. The <code><a href="../reference/find.names.html">find.names()</a></code>
function can help you subset these variable names. There are parameters
to define the search criteria, provide exclusions, and a beginning and
ending range to perform the search. Here are some simple examples:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare data</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span></span>
<span></span>
<span><span class="co"># View names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># [1] "mpg"  "cyl"  "disp" "hp"   "drat" "wt"   "qsec" "vs"   "am"   "gear" "carb"</span></span>
<span></span>
<span><span class="co"># Get all names starting with "c"</span></span>
<span><span class="fu"><a href="../reference/find.names.html">find.names</a></span><span class="op">(</span><span class="va">dat</span>, pattern <span class="op">=</span> <span class="st">"c*"</span><span class="op">)</span></span>
<span><span class="co"># [1] "cyl"  "carb"</span></span>
<span></span>
<span><span class="co"># Get all names starting with "c" or "d"</span></span>
<span><span class="fu"><a href="../reference/find.names.html">find.names</a></span><span class="op">(</span><span class="va">dat</span>, pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c*"</span>, <span class="st">"d*"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># [1] "cyl"  "carb" "disp" "drat"</span></span>
<span></span>
<span><span class="co"># Get names starting with "c" or "d" from column 4 on</span></span>
<span><span class="fu"><a href="../reference/find.names.html">find.names</a></span><span class="op">(</span><span class="va">dat</span>, pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"c*"</span>, <span class="st">"d*"</span><span class="op">)</span>, start <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co"># [1] "carb" "drat"</span></span></code></pre></div>
</div>
<div id="attr" class="section level3">
<h3 class="hasAnchor">
<a href="#attr" class="anchor"></a>Copying attributes between data frames</h3>
<p>Base R functions that work with data frames are annoying in that they
often drop any attributes assigned to data frame columns. Observe:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Prepare sample dataset</span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">[</span> , <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Assign some labels </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="st">"Miles Per Gallon"</span>, </span>
<span>                    cyl <span class="op">=</span> <span class="st">"Cylinders"</span>,</span>
<span>                    disp <span class="op">=</span> <span class="st">"Displacement"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View labels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="co"># $mpg</span></span>
<span><span class="co"># [1] "Miles Per Gallon"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $cyl</span></span>
<span><span class="co"># [1] "Cylinders"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $disp</span></span>
<span><span class="co"># [1] "Displacement"</span></span>
<span></span>
<span><span class="co"># Subset the data</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">cyl</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Labels are gone!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co"># list()</span></span></code></pre></div>
<p>To get the attributes back, one must copy the attributes from the
original data frame to the subset data frame. That is what the
<code><a href="../reference/copy.attributes.html">copy.attributes()</a></code> function does. Picking up from the
example above, let’s now restore the attributes lost during the
<code><a href="https://rdrr.io/r/base/subset.html">subset()</a></code> operation:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Restore attributes</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/copy.attributes.html">copy.attributes</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">dat2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Labels are back!</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/labels.html">labels</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span></span>
<span><span class="co"># $mpg</span></span>
<span><span class="co"># [1] "Miles Per Gallon"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $cyl</span></span>
<span><span class="co"># [1] "Cylinders"</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $disp</span></span>
<span><span class="co"># [1] "Displacement"</span></span></code></pre></div>
</div>
<div id="supsc" class="section level3">
<h3 class="hasAnchor">
<a href="#supsc" class="anchor"></a>Superscripts and Subscripts</h3>
<p>There are many occasions when you need to create a superscript or
subscript. The UTF-8 character set provides superscript and subscript
versions of many commonly used characters. For example, the following
code can be used to add a superscript ‘1’ to the front of a footnote
string: <img src="../man/images/sup1.png"></p>
<p>Remembering these UTF-8 codes, however, can be a challenge for most
people. The <code><a href="../reference/supsc.html">supsc()</a></code> and <code><a href="../reference/subsc.html">subsc()</a></code> functions look
up the superscript or subscript version of a normal character, without
having to remember or research the proper UTF-8 code.</p>
<p>Using these functions, we can therefore rewrite the above example as
follows: <img src="../man/images/sup2.png"></p>
<p>Here are a couple more examples:
<img src="../man/images/sup3.png"></p>
<p>Note that using the <strong>glue</strong> package, you can embed
these functions directly in your character strings:
<img src="../man/images/sup4.png"></p>
<p><a href="#top">top</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Bosak, Andrew Simmons.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
