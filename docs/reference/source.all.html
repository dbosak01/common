<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Source all programs in a directory — source.all • common</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><script src="../extra.js"></script><meta property="og:title" content="Source all programs in a directory — source.all"><meta property="og:description" content="A function to source all programs in a specified directory.
The function will run each R program file in the directory, and then
return a data frame of results of the run."><meta property="og:image" content="https://common.r-sassy.org/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">common</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"></ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="../articles/common.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/dbosak01/common/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Source all programs in a directory</h1>
    <small class="dont-index">Source: <a href="https://github.com/dbosak01/common/blob/HEAD/R/file_functions.R" class="external-link"><code>R/file_functions.R</code></a></small>
    <div class="hidden name"><code>source.all.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A function to source all programs in a specified directory.
The function will run each R program file in the directory, and then
return a data frame of results of the run.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">source.all</span><span class="op">(</span>path <span class="op">=</span> <span class="st">"."</span>, pattern <span class="op">=</span> <span class="cn">NULL</span>, exclude <span class="op">=</span> <span class="cn">NULL</span>, isolate <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>path</dt>
<dd><p>The directory to source programs from.  Default is the current
working directory.</p></dd>


<dt>pattern</dt>
<dd><p>A full or partial name of the programs to source.  If partial,
use the question mark (?) or asterisk (*) characters to indicate
the missing piece(s). Default is NULL, which will return all programs.
You may pass multiple patterns as a vector.  In that case, the function
will perform an "or" operation on each pattern. Note that it is not necessary
to include the ".R" file extension in your patterns. It is assumed that all
source files have a ".R" extension.</p></dd>


<dt>exclude</dt>
<dd><p>A vector of patterns to exclude from the included programs.
The exclusion patterns can be the names of specific programs or a wild card
exclusion. The asterisk (*)
and question mark (?) characters may be used to indicate partial matches.
Similar to the "pattern" parameter, the ".R" file extension can be ignored.</p></dd>


<dt>isolate</dt>
<dd><p>Whether to isolate each source call to its own environment.
Valid values are TRUE, FALSE, or an environment to run in.  If the isolate
parameter is FALSE, the programs will run in the global environment. Default
is TRUE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame of the results of the source operation. The
data frame will show each file sourced, the time started, the time ended,
the status, and any error messages. The status value is either 0 (no errors)
or 1 (errors).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code>source.all</code> function attempts to run all programs in a directory.
This function is useful for batch runs.  It has parameters to control
which programs are run or not run.  By default, the function will run
all programs in the working directory.  You can use the "pattern" and
"exclude" parameters to specify individual program names, or wild card matches.
Inclusion and exclusion patterns are case-insensitive.</p>
<p>Note that the function will run all programs, regardless of any errors.
Errors will be indicated in the "Status" and "Message" columns of the result
dataset.</p>
    </div>
    <div id="result-dataset">
    <h2>Result Dataset</h2>
    

<p>The <code>source.all</code> function returns a dataset showing the results of the
source operation. There will be one row for each program executed. The
return dataset has the following columns:</p><ul><li><p><strong>Filename</strong>: The name of the program.</p></li>
<li><p><strong>StartTime</strong>: The date and time execution started.</p></li>
<li><p><strong>EndTime</strong>: The date and time execution ended.</p></li>
<li><p><strong>Status</strong>: A numeric value indicating whether or not
  the program returned errors or warnings. A zero (0) value indicates that
  no errors occurred. A one (1) value indicates that an error
  occurred. Warnings can also be generated along with an error, but
  the status will still be one (1). A two (2) value indicates
  that warnings occurred but no errors. Note that capture of warnings
  is less reliable than the capture of errors. It is possible that a program
  may generate a warning and still return a zero (0) status. If you want to
  ensure that warnings are detected, convert them to errors with
  <code>options(warn = 2)</code>.</p></li>
<li><p><strong>Message</strong>: If errors or warnings are returned from the program,
  they will be shown in this column. Multiple messages will be separated
  with a semi-colon (;) and a carriage return.</p></li>
</ul><p>In addition to the information shown above, the results dataset will have
attributes assigned with the parameter values passed to the function. Those
attributes can be observed with the Base R <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code> function.</p>
    </div>
    <div id="source-isolation">
    <h2>Source Isolation</h2>
    

<p>Multiple programs running in the same environment have a risk of conflicting
variables or data. Variables created by the first program can possibly interfere
with the running of the next program.  Or they could conflict with variables
in the global environment. To avoid such conflicts, each program
is run in its own environment by default. <code>isolate = TRUE</code> starts each program
with a clean workspace, and is the best choice for running programs in
batch.</p>
<p>There may be situations, however, where you do not want to isolate the
source calls.  For example, if you are loading functions from a utility
library, you may actually wanted them loaded into the global environment
so they can by accessed by you or your programs.  In this case, set the
"isolate" parameter to FALSE.</p>
<p>Lastly, there may be situations where you want to intentionally share an
environment, or extract values create by the running programs.
In this case, you can instantiate a new environment
yourself, and pass that to the "isolate" parameter instead of TRUE or FALSE.
Note that this environment will be shared by all programs, but will not have
access to the global environment.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other fileops: 
<code><a href="Sys.path.html">Sys.path</a>()</code>,
<code><a href="dir.find.html">dir.find</a>()</code>,
<code><a href="file.find.html">file.find</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co"># Create temp directory</span></span>
<span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write program 1</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"prog1.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"print('Hello from program 1')"</span>, <span class="va">p1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write program 2</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"prog2.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"stop('Error from program 2')"</span>, <span class="va">p2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write program 3</span></span>
<span><span class="va">p3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">file</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">tmp</span>, <span class="st">"prog3.R"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="st">"print('Hello from program 3')"</span>, <span class="va">p3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/connections.html" class="external-link">close</a></span><span class="op">(</span><span class="va">p3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example #1: Run all programs</span></span>
<span><span class="va">res1</span> <span class="op">&lt;-</span> <span class="fu">source.all</span><span class="op">(</span><span class="va">tmp</span><span class="op">)</span></span>
<span><span class="co"># [1] "Hello from program 1"</span></span>
<span><span class="co"># [1] "Hello from program 3"</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">res1</span></span>
<span><span class="co">#   Filename           StartTime             EndTime Status              Message</span></span>
<span><span class="co"># 1  prog1.R 2024-03-05 10:12:04 2024-03-05 10:12:04      0              Success</span></span>
<span><span class="co"># 2  prog2.R 2024-03-05 10:12:04 2024-03-05 10:12:04      1 Error from program 2</span></span>
<span><span class="co"># 3  prog3.R 2024-03-05 10:12:04 2024-03-05 10:12:04      0              Success</span></span>
<span></span>
<span><span class="co">#' # Example #2: Exclusion criteria</span></span>
<span><span class="va">res2</span> <span class="op">&lt;-</span> <span class="fu">source.all</span><span class="op">(</span><span class="va">tmp</span>, exclude <span class="op">=</span> <span class="st">"prog2"</span><span class="op">)</span></span>
<span><span class="co"># [1] "Hello from program 1"</span></span>
<span><span class="co"># [1] "Hello from program 3"</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">res2</span></span>
<span><span class="co"># Filename           StartTime             EndTime Status Message</span></span>
<span><span class="co"># 1  prog1.R 2024-03-05 10:13:24 2024-03-05 10:13:24      0 Success</span></span>
<span><span class="co"># 2  prog3.R 2024-03-05 10:13:24 2024-03-05 10:13:24      0 Success</span></span>
<span></span>
<span><span class="co"># Example #3: Inclusion criteria</span></span>
<span><span class="va">res3</span> <span class="op">&lt;-</span> <span class="fu">source.all</span><span class="op">(</span><span class="va">tmp</span>, pattern <span class="op">=</span> <span class="st">"*2"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="va">res3</span></span>
<span><span class="co">#   Filename           StartTime             EndTime Status              Message</span></span>
<span><span class="co"># 1  prog2.R 2024-03-05 10:16:41 2024-03-05 10:16:41      1 Error from program 2</span></span>
<span></span>
<span><span class="co"># View attributes</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">res3</span><span class="op">)</span></span>
<span><span class="co"># $names</span></span>
<span><span class="co"># [1] "Filename"  "StartTime" "EndTime"   "Status"    "Message"</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $class</span></span>
<span><span class="co"># [1] "data.frame"</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $row.names</span></span>
<span><span class="co"># [1] 1</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $path</span></span>
<span><span class="co"># [1] "C:\Users\dbosa\AppData\Local\Temp\RtmpGAXYJl"</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $pattern</span></span>
<span><span class="co"># [1] "*2.R"</span></span>
<span><span class="co">#</span></span>
<span><span class="co"># $errors</span></span>
<span><span class="co"># [1] 1</span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Bosak.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

